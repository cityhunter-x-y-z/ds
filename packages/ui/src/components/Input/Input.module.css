/* ===========================================
   INPUT STYLES - CSS Module - FIGMA MATCHED
   File: packages/ui/src/components/Input/Input.module.css
   Based on Figma design tokens and specifications (1.0-5.0 series)
   =========================================== */

/* Import design tokens */
@import '@gazebo/tokens/src/theme.css';

/* Composed focus ring from design tokens */
:root {
  --focus-primary: 
    var(--focus-primary-layerone-x) var(--focus-primary-layerone-y) var(--focus-primary-layerone-blur) var(--focus-primary-layerone-spread) var(--focus-primary-layerone-color),
    var(--focus-primary-layertwo-x) var(--focus-primary-layertwo-y) var(--focus-primary-layertwo-blur) var(--focus-primary-layertwo-spread) var(--focus-primary-layertwo-color),
    var(--focus-primary-layerthree-x) var(--focus-primary-layerthree-y) var(--focus-primary-layerthree-blur) var(--focus-primary-layerthree-spread) var(--focus-primary-layerthree-color),
    var(--focus-primary-layerfour-x) var(--focus-primary-layerfour-y) var(--focus-primary-layerfour-blur) var(--focus-primary-layerfour-spread) var(--focus-primary-layerfour-color);
}

/* ===== BASE INPUT STYLES - DIVL4 ===== */
.input {
  /* DIVL4: From Figma dev mode */
  display: flex;
  align-items: center;
  flex: 1 0 0;
  gap: var(--inputfield-divl4-gap); /* 0px */
  padding: var(--inputfield-divl4-verticle-padding) var(--inputfield-divl4-horizontal-padding); /* 0px */
  border-radius: var(--inputfield-divl4-corner-radius); /* 0px */
  
  /* Reset default input styles */
  border: none;
  outline: none;
  background: transparent;
  
  /* Base typography - FIGMA MATCHED */
  font-family: var(--body-fontfamily);
  font-size: var(--body-size);
  font-weight: var(--body-weight-regular);
  line-height: var(--body-lineheight);
  letter-spacing: var(--body-letterspacing);
  
  /* Transitions for smooth interactions */
  transition: all var(--transition-fast, 0.2s ease);
  
  /* Prevent text selection on disabled inputs */
  user-select: text;
  
  /* Base layout */
  box-sizing: border-box;
}


.input::placeholder {
  color: var(--inputfield-static-default-placeholdertext);
  opacity: 1;
}

.input:focus::placeholder {
  color: var(--inputfield-interactive-placeholdertext-onfocus);
}

/* ===== CONTAINER STYLES - DIVL1 (Outer Container) ===== */
.container {
  position: relative;
  display: flex;
  flex-direction: column;
  width: 100%;
  /* DIVL1: Main container with gap between label, input, and messages */
  gap: var(--inputfield-divl1-gap); /* 8px between elements */
  padding: var(--inputfield-divl1-verticle-padding) var(--inputfield-divl1-horizontal-padding); /* 0px */
}

/* ===== INPUT WRAPPER STYLES - DIVL2 (Border Container) ===== */
.inputWrapper {
  position: relative;
  display: flex;
  align-items: center;
  align-self: stretch;
  
  /* DIVL2: HAS BORDER, BACKGROUND, CORNER RADIUS (from Figma) */
  background: var(--inputfield-static-default-surface);
  border: var(--inputfield-divl2-stroke-thickness) solid var(--inputfield-static-default-border);
  border-radius: var(--inputfield-divl2-corner-radius);
  
  /* DIVL2: No gap or padding (from Figma) */
  gap: var(--inputfield-divl2-gap); /* 0px */
  padding: var(--inputfield-divl2-verticle-padding) var(--inputfield-divl2-horizontal-padding); /* 0px */
  
  /* Layout properties */
  box-sizing: border-box;
  overflow: hidden;
  min-width: 0;
}

/* ===== CONTENT CONTAINER - DIVL3 (Padding Container) ===== */
.contentContainer {
  position: relative;
  display: flex;
  align-items: center;
  align-self: stretch;
  flex: 1 0 0;
  
  /* DIVL3: HAS PADDING AND GAP (from Figma) */
  gap: var(--inputfield-divl3-gap); /* 12px between icons and input */
  padding: var(--inputfield-divl3-verticle-padding) var(--inputfield-divl3-horizontal-padding); /* 12px 16px */
  
  /* DIVL3: NO BORDER, NO BACKGROUND (from Figma) */
  background: transparent;
  border: none;
  border-radius: var(--inputfield-divl3-corner-radius); /* 0px */
  box-sizing: border-box;
}

/* ===== SIZE VARIANTS ===== */
/* Medium size is default - using existing inputfield-height token */
.inputMd {
  font-size: var(--body-size);
}

/* DIVL2 (Border) height for medium */
.containerMd .inputWrapper {
  height: var(--inputfield-height); /* 24px - design token default */
}

/* Large size - using global size scale like buttons */
.inputLg {
  font-size: var(--body-size);
}

/* DIVL2 (Border) height for large */
.containerLg .inputWrapper {
  height: var(--global-size-8); /* 32px - follows button sizing pattern */
}

/* Default wrapper height (when no size specified) should be medium */
.inputWrapper {
  height: var(--inputfield-height); /* Default to medium size - DIVL2 */
}

/* DIVL3 Content container always stretches */
.contentContainer {
  /* No height - stretches to fill parent */
}

/* DIVL3 Content container always uses same padding regardless of size */
.contentContainer {
  /* Padding is consistent across sizes - handled by design tokens */
}

/* ===== INPUT STATES ===== */

/* Default State - Applied to DIVL2 (Border Layer) */
.default .inputWrapper,
.containerDefault .inputWrapper {
  background: var(--inputfield-static-default-surface);
  border-color: var(--inputfield-static-default-border);
  color: var(--text-neutral-extreme);
}

/* Focus State - Applied to DIVL2 (Border Layer) */
.focus .inputWrapper,
.containerFocus .inputWrapper,
.inputWrapper:focus-within,
.inputWrapper:has(.input:focus) {
  background: var(--inputfield-interactive-surface-onhover);
  border-color: var(--inputfield-interactive-border-onfocus);
  box-shadow: var(--focus-primary);
}

/* Ensure focus state persists during typing */
.inputWrapper:focus-within .input,
.inputWrapper:has(.input:focus) .input {
  /* Maintain focus appearance while actively typing */
  background: transparent;
}

/* Ensure focus ring stays visible during text input */
.inputWrapper:focus-within {
  outline: none; /* Remove default outline */
  background: var(--inputfield-interactive-surface-onhover) !important;
  border-color: var(--inputfield-interactive-border-onfocus) !important;
  box-shadow: var(--focus-primary) !important;
}

.input:focus {
  outline: none; /* Remove default outline from input */
  background: transparent !important;
  border: none !important; /* Remove any input-specific borders */
  box-shadow: none !important; /* Remove any input-specific shadows */
}

/* Additional focus state for active typing */
.inputWrapper:has(.input:focus),
.inputWrapper:focus-within {
  /* Maintain focus ring during active typing */
  background: var(--inputfield-interactive-surface-onhover) !important;
  border-color: var(--inputfield-interactive-border-onfocus) !important;
  box-shadow: var(--focus-primary) !important;
}

/* Ensure input element never has its own border/background */
.input,
.input:hover,
.input:focus,
.input:active {
  border: none !important;
  background: transparent !important;
  box-shadow: none !important;
  outline: none !important;
}

/* Hover State */
.hover .inputWrapper:hover:not(:focus-within),
.containerHover .inputWrapper:hover:not(:focus-within) {
  background: var(--inputfield-interactive-surface-onhover);
  border-color: var(--inputfield-static-default-border);
}

/* Warning State - Applied to DIVL2 (Border Layer) */
.warning .inputWrapper,
.containerWarning .inputWrapper {
  background: var(--inputfield-static-default-surface);
  border-color: var(--stroke-semantic-warning);
  color: var(--text-semantic-warning);
}

/* Error State - Applied to DIVL2 (Border Layer) */
.error .inputWrapper,
.containerError .inputWrapper {
  background: var(--inputfield-static-default-surface);
  border-color: var(--stroke-semantic-error);
  color: var(--text-semantic-error);
}

/* Success State - Applied to DIVL2 (Border Layer) */
.success .inputWrapper,
.containerSuccess .inputWrapper {
  background: var(--inputfield-static-default-surface);
  border-color: var(--stroke-semantic-success);
  color: var(--text-semantic-success);
}

/* Disabled State */
.disabled .inputWrapper,
.containerDisabled .inputWrapper {
  background: var(--inputfield-static-disabled-surface);
  border-color: var(--inputfield-static-disabled-border);
  color: var(--inputfield-static-disabled-text);
  cursor: not-allowed;
  pointer-events: none;
}

.disabled .input,
.containerDisabled .input {
  color: var(--inputfield-static-disabled-text);
  cursor: not-allowed;
  pointer-events: none;
}

.disabled .input::placeholder,
.containerDisabled .input::placeholder {
  color: var(--inputfield-static-disabled-text);
}

/* ===== LABEL STYLES ===== */
.label {
  display: block;
  margin-bottom: var(--inputfield-divl1-gap);
  
  /* Typography */
  font-family: var(--body-fontfamily);
  font-size: var(--body-size);
  font-weight: var(--body-weight-semibold);
  color: var(--text-neutral-extreme);
  line-height: var(--body-lineheight);
}

.floatingLabel {
  position: absolute;
  left: var(--inputfield-divl3-horizontal-padding);
  top: 50%;
  transform: translateY(-50%);
  
  /* Typography */
  font-family: var(--body-fontfamily);
  font-size: var(--body-size);
  font-weight: var(--body-weight-regular);
  color: var(--inputfield-static-default-placeholdertext);
  
  /* Transitions */
  transition: all var(--transition-fast, 0.2s ease);
  pointer-events: none;
  z-index: 1;
}

.inputWrapper:focus-within .floatingLabel,
.inputWrapper:has(.input:not(:placeholder-shown)) .floatingLabel {
  top: calc(var(--inputfield-divl3-verticle-padding) * -1);
  font-size: calc(var(--body-size) * 0.75);
  color: var(--inputfield-interactive-border-onfocus);
  background: var(--inputfield-static-default-surface);
  padding: 0 var(--spacing-space-1);
}

.required {
  color: var(--text-semantic-error);
  margin-left: var(--spacing-space-1);
}

/* ===== ICON STYLES ===== */
.icon {
  color: var(--inputfield-static-default-icon);
  flex-shrink: 0;
}

/* Icon state colors */
.warning .icon,
.containerWarning .icon {
  color: var(--icon-semantic-warning);
}

.error .icon,
.containerError .icon {
  color: var(--icon-semantic-error);
}

.success .icon,
.containerSuccess .icon {
  color: var(--icon-semantic-success);
}

.disabled .icon,
.containerDisabled .icon {
  color: var(--inputfield-static-disabled-icon);
}

.iconLeft {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  /* Default icon size for medium inputs */
  width: 16px;
  height: 16px;
  /* Icons are handled by DIVL3 gap, no additional margin needed */
}

/* Large input icon sizing */
.containerLg .iconLeft {
  width: 20px;
  height: 20px;
}

.iconRight {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  /* Default icon size for medium inputs */
  width: 16px;
  height: 16px;
  /* Icons are handled by DIVL3 gap, no additional margin needed */
}

/* Large input icon sizing */
.containerLg .iconRight {
  width: 20px;
  height: 20px;
}

.containerWithIcon .input {
  /* Input never needs padding - wrapper handles all spacing */
  padding: 0;
}

/* Container with icons - no special wrapper styling needed */
.containerWithIcon .inputWrapper {
  /* DIVL2 layer remains unchanged for icons */
}

.containerWithIcon .iconLeft {
  /* Icons are positioned by DIVL3 content container */
  position: relative;
  z-index: 1;
}

.containerWithIcon .iconRight {
  /* Icons are positioned by DIVL3 content container */
  position: relative;
  z-index: 1;
}

/* Ensure all inputs follow DIVL4 Figma structure */
.input {
  /* DIVL4 structure already defined above */
}

/* ===== MESSAGE STYLES ===== */
.helperText {
  /* Messages are spaced from the input using DIVL1 gap */
  font-family: var(--body-fontfamily);
  font-size: calc(var(--body-size) * 0.875);
  color: var(--inputfield-static-default-helptext);
  line-height: var(--body-lineheight);
}

.errorMessage {
  /* Messages are spaced from the input using DIVL1 gap */
  font-family: var(--body-fontfamily);
  font-size: calc(var(--body-size) * 0.875);
  color: var(--inputfield-static-default-helptexterror);
  line-height: var(--body-lineheight);
}

.successMessage {
  /* Messages are spaced from the input using DIVL1 gap */
  font-family: var(--body-fontfamily);
  font-size: calc(var(--body-size) * 0.875);
  color: var(--text-semantic-success);
  line-height: var(--body-lineheight);
}

/* ===== TEXTAREA SPECIFIC STYLES ===== */
/* DIVL4: Textarea element - no padding, transparent */
.textarea .input {
  resize: vertical;
  min-height: calc(var(--inputfield-height) * 2 - (var(--inputfield-divl3-verticle-padding) * 2));
  /* DIVL4: No styling - handled by outer layers */
  padding: var(--inputfield-divl4-verticle-padding) var(--inputfield-divl4-horizontal-padding); /* 0px */
  border: none !important;
  background: transparent !important;
  box-shadow: none !important;
  outline: none !important;
}

/* DIVL2: Textarea outer container */
.textarea .inputWrapper,
.textareaContainer .inputWrapper {
  align-items: flex-start;
  /* No height - content container handles sizing */
}

/* DIVL3: Textarea content container with border */
.textarea .contentContainer,
.textareaContainer .contentContainer {
  align-items: flex-start;
  min-height: calc(var(--inputfield-height) * 2); /* 48px including padding and border */
}

/* Textarea size variants - DIVL3 content with border */
.textareaContainer.containerMd .contentContainer {
  min-height: calc(var(--inputfield-height) * 2); /* Medium textarea: 48px */
}

.textareaContainer.containerLg .contentContainer {
  min-height: calc(var(--global-size-8) * 2); /* Large textarea: 64px */
}

/* Large textarea input element - DIVL4 */
.textareaContainer.containerLg .input {
  min-height: calc(var(--global-size-8) * 2 - (var(--inputfield-divl3-verticle-padding) * 2));
}

.characterCount {
  position: absolute;
  bottom: var(--spacing-space-1);
  right: var(--spacing-space-2);
  font-size: calc(var(--body-size) * 0.75);
  color: var(--inputfield-static-default-helptext);
  background: var(--inputfield-static-default-surface);
  padding: 0 var(--spacing-space-1);
}

/* ===== SEARCH INPUT SPECIFIC STYLES ===== */
.searchContainer .inputWrapper {
  position: relative;
}

/* Fix search input white border issue */
.searchContainer .inputWrapper:focus-within {
  background: var(--inputfield-interactive-surface-onhover) !important;
  border-color: var(--inputfield-interactive-border-onfocus) !important;
  box-shadow: var(--focus-primary) !important;
  /* Override any conflicting border styles */
}

.searchContainer .input:focus {
  background: transparent !important;
  /* Ensure no additional white border layers */
}

/* Specific search input focus handling */
.searchContainer .inputWrapper:has(.input:focus) {
  background: var(--inputfield-interactive-surface-onhover) !important;
  border-color: var(--inputfield-interactive-border-onfocus) !important;
  box-shadow: var(--focus-primary) !important;
}

.clearButton {
  background: none;
  border: none;
  padding: var(--spacing-space-1);
  cursor: pointer;
  color: var(--icon-neutral-moderate);
  transition: color var(--transition-fast, 0.2s ease);
}

.clearButton:hover {
  color: var(--icon-neutral-extreme);
}

/* ===== PASSWORD INPUT SPECIFIC STYLES ===== */
.passwordContainer {
  position: relative;
}

.passwordToggle {
  background: none;
  border: none;
  padding: var(--spacing-space-1);
  cursor: pointer;
  color: var(--icon-neutral-moderate);
  transition: color var(--transition-fast, 0.2s ease);
  display: flex;
  align-items: center;
  justify-content: center;
}

.passwordToggle:hover {
  color: var(--icon-neutral-extreme);
}

.passwordToggle:focus {
  outline: 2px solid var(--focus-primary-layerone-color);
  outline-offset: 2px;
  border-radius: var(--corners-sm);
}

/* ===== VERIFICATION INPUT STYLES ===== */
.verificationContainer {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.verificationInputs {
  display: flex;
  gap: var(--inputfield-divl2-gap-otp);
  align-items: center;
}

.verification .input {
  width: var(--inputfield-divl3-width);
  height: var(--inputfield-divl3-width);
  text-align: center;
  border: var(--inputfield-divl3-stroke-thicknessotp) solid var(--inputfield-static-default-border);
  border-radius: var(--inputfield-divl3-corner-radiusotp);
  background: var(--inputfield-static-default-surface);
  font-size: var(--body-size);
  font-weight: var(--body-weight-semibold);
}

.verification .input:focus {
  border-color: var(--inputfield-interactive-border-onfocus);
  box-shadow: var(--focus-primary);
}

.verificationSeparator {
  color: var(--text-neutral-moderate);
  font-weight: var(--body-weight-semibold);
  margin: 0 var(--spacing-space-1);
}

/* ===== CREDIT CARD INPUT STYLES ===== */
.creditcardContainer .inputWrapper {
  position: relative;
}

.cardIcon {
  position: absolute;
  right: var(--inputfield-divl3-horizontal-padding);
  top: 50%;
  transform: translateY(-50%);
  color: var(--icon-neutral-moderate);
}

/* ===== SELECT INPUT STYLES (Placeholder) ===== */
.select .inputWrapper {
  cursor: pointer;
  position: relative;
}

.select .input {
  cursor: pointer;
  caret-color: transparent;
}

.selectDropdown {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  z-index: 1000;
  background: var(--surface-neutral-lightsurface);
  border: var(--inputfield-divl2-stroke-thickness) solid var(--inputfield-static-default-border);
  border-radius: var(--inputfield-divl2-corner-radius);
  box-shadow: var(--elevation-lowraised-layerone-color) var(--elevation-lowraised-layerone-x) var(--elevation-lowraised-layerone-y) var(--elevation-lowraised-layerone-blur) var(--elevation-lowraised-layerone-spread);
  max-height: 200px;
  overflow-y: auto;
  margin-top: var(--spacing-space-1);
}

.selectOption {
  padding: var(--inputfield-divl3-verticle-padding) var(--inputfield-divl3-horizontal-padding);
  cursor: pointer;
  color: var(--text-neutral-extreme);
  transition: background-color var(--transition-fast, 0.2s ease);
}

.selectOption:hover {
  background: var(--surface-neutral-muted);
}

.selectOption.selected {
  background: var(--surface-primary-default);
  color: var(--text-neutral-ondarksurface);
}

/* ===== VARIANT-SPECIFIC CONTAINER STYLES ===== */
.textContainer { }
.emailContainer { }
.searchContainer { }
.passwordContainer { }
.creditcardContainer { }
.multitextContainer { }
.numberContainer { }
.labelContainer { }
.phoneContainer { }
.currencyContainer { }
.selectContainer { }
.multiselectContainer { }
.datepickerContainer { }
.textareaContainer { }
.verificationContainer { }

/* Container state classes */
.containerDefault { }
.containerWarning { }
.containerFocus { }
.containerHover { }
.containerError { }
.containerSuccess { }

/* ===== RESPONSIVE DESIGN ===== */
@media (max-width: 768px) {
  .inputLg {
    height: calc(var(--inputfield-height) * 0.875);
    padding: var(--inputfield-divl3-verticle-paddingotp) var(--inputfield-divl3-horizontal-padding);
  }
  
  .inputMd {
    height: calc(var(--inputfield-height) * 0.75);
    padding: var(--inputfield-divl3-verticle-paddingotp) calc(var(--inputfield-divl3-horizontal-padding) * 0.75);
  }
  
  .verificationInputs {
    gap: calc(var(--inputfield-divl2-gap-otp) * 0.75);
  }
  
  .verification .input {
    width: calc(var(--inputfield-divl3-width) * 0.875);
    height: calc(var(--inputfield-divl3-width) * 0.875);
  }
}

/* ===== ACCESSIBILITY ENHANCEMENTS ===== */
@media (prefers-reduced-motion: reduce) {
  .input,
  .inputWrapper,
  .floatingLabel,
  .passwordToggle,
  .clearButton {
    transition: none;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .inputWrapper {
    border-width: 2px;
  }
  
  .input:focus,
  .inputWrapper:focus-within {
    outline: 2px solid currentColor;
    outline-offset: 2px;
  }
}

/* Focus management for keyboard navigation */
.input:focus-visible,
.passwordToggle:focus-visible,
.clearButton:focus-visible {
  outline: 2px solid var(--focus-primary-layerone-color);
  outline-offset: 2px;
  border-radius: var(--corners-sm);
}

/* ===== ANIMATION KEYFRAMES ===== */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-4px); }
  to { opacity: 1; transform: translateY(0); }
}

.selectDropdown {
  animation: fadeIn 0.2s ease-out;
}

/* ===== DARK MODE SUPPORT (Future) ===== */
@media (prefers-color-scheme: dark) {
  /* Dark mode styles would go here */
  /* Using the same token structure but with dark variants */
}